<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Kray's Portfolio – freestone-final-report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kray’s Portfolio</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/freestok"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/kray-freestone/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/spatialKray"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">



<section id="introduction" class="level1">
<h1>INTRODUCTION</h1>
<p>This application, Census Find, intends to make access to census data both accessible and reproducible. While there are other tools out there that aim to accomplish this, I believe this tool fills a special niche that did not, up until this point, exist. The intended audience are casual users who are not used to exploring census data, nor joining in census data with TIGER shapefiles to make cartographic products.</p>
</section>
<section id="final-product-and-demonstration" class="level1">
<h1>FINAL PRODUCT AND DEMONSTRATION</h1>
<p>The final product for this project is a website where a user can explore census data. As of this writing, the final product is not on a live website for others to use. However, the <a href="https://github.com/freestok/census-find"><u>source code can be found on my GitHub profile</u></a>. Moreover, here is a <a href="https://youtu.be/Jf0zjedFfbA"><u>video of me showcasing the functionality of Census Find</u></a>.</p>
</section>
<section id="target-audience" class="level1">
<h1>TARGET AUDIENCE</h1>
<p>As stated before, this is intended to be used by casual users who have difficulty exploring the ins-and-outs of USA census structures. All variables for American Community Survey (ACS5) and Decennial (SF1) surveys have been cleaned so that they make sense to the end user (e.g. P001001 vs Total Population).</p>
<p>In addition to casual users, I hope more advanced users find use in this tool. The most powerful feature of this application is the ability to build templates. These templates can be utilized on any geographic area providing reproducible analysis.</p>
</section>
<section id="section" class="level1">
<h1></h1>
</section>
<section id="application-overview" class="level1">
<h1>APPLICATION OVERVIEW</h1>
<p>Census Find consists of three main components: exploring data, querying data, and creating templates for data.</p>
<section id="exploring" class="level2">
<h2 class="anchored" data-anchor-id="exploring">EXPLORING</h2>
<p>Data exploration is the first page a user is shown. On the left-hand side, a user can select whether they would like to explore states, counties, places, or census tracts. Depending on their choice, they may have to further filter their results by state. Next, a user can specifically search for a geography by name or GEOID. The search filters results in a table on the right-hand side.</p>
<p>The user also must apply a template to the geography they are querying. If none are available, they can be created in the Template tab. Upon clicking a geometry on the right side of the screen, the user will get taken to a page showing the data they requested.</p>
<p>Touches like searching by GEOID, or having the data page create a reproducible URL – so they can go straight back to their data page without having to go through the explore page – are features I hope advanced and repeat users appreciate.</p>
<p>In the future, I would like to stylize the tables to be able to hide and show margin of errors, collapse table groups, and give warning messages to users when margin of error percentages are too high for useful analysis.</p>
</section>
<section id="templates" class="level2">
<h2 class="anchored" data-anchor-id="templates">TEMPLATES</h2>
<p>This page is what sets this product apart from others. Here, users can choose whether to build an ACS or Decennial template.</p>
<p>After choosing a year for their data (currently, users cannot mix years to compare how a certain variable has changed through time), a user can search for and click on variables to add to their templates. Variables can be searched by label or variable name (e.g.&nbsp;P001001).</p>
<p>After a user has clicked on all of the variables they want, they can give the template a name and click "Finish". Then, they will be able to see their template on the Explore page.</p>
<p>Currently, this page is missing some checks in place to make sure users do not mix variable years and ACS and Decennial data types. In the long-term, it would be nice if a user could mix years and survey (ACS or Decennial) types within one template. The database structure can already accommodate this, but the back-end and front-end are not ready.</p>
</section>
<section id="query" class="level2">
<h2 class="anchored" data-anchor-id="query">QUERY</h2>
<p>This page lets users find geometries that match a certain criteria, such as, how many counties in Michigan have more than 70% of the population living in urban areas? Once a query is complete, the user is taken to a map where they can view the specific data they requested by hovering over a geography.</p>
<p>Users have an option of stacking multiple queries and specifying whether all of the criteria needs to be met, or any of the criteria needs to be met. Obviously, this does not give the user as much flexibility as a SQL statement, but hopefully it is enough for casual and advanced users alike.</p>
<p>Similar to the templates page, there are no checks to make sure a user is not submitting a query that mixes ACS and Decennial data, and years.</p>
<p>Moreover, I would like to let the user query by margin of error percentage, so they could filter out results whose margin of error is too high for useful analysis. This would only apply to ACS data, since Decennial data consists of values and not estimates.</p>
</section>
</section>
<section id="implementation" class="level1">
<h1>IMPLEMENTATION</h1>
<p>There are three major parts to this application: the React front-end, the R back-end, and the Postgres database.</p>
<section id="react-front-end" class="level2">
<h2 class="anchored" data-anchor-id="react-front-end">REACT FRONT-END</h2>
<p>As the name states, the front-end was built in React. The following libraries are mainly responsible for front-end functionality:</p>
<ul>
<li><p><a href="https://chakra-ui.com/"><u>Chakra UI</u></a> is responsible for all &gt; HTML elements, layouts, typefaces, and colors. It is also &gt; responsible for the button that switches between light and dark &gt; modes.</p></li>
<li><p><a href="https://visgl.github.io/react-map-gl/"><u>react-map-gl</u></a> is &gt; responsible for visualizing the spatial data. The library gives &gt; the option of using MapBox GL JS and Maplibre GL JS. I am using &gt; the latter.</p></li>
<li><p><a href="https://axios-http.com/"><u>axios</u></a> is responsible for fetching &gt; data from the back-end.</p></li>
</ul>
</section>
<section id="r-back-end" class="level2">
<h2 class="anchored" data-anchor-id="r-back-end">R BACK-END</h2>
<p>The backend is where most of the computation happens in this application. It is responsible for fetching variables and geometries from the Postgres database, as well as fetching new data from the census API. The back-end would not be possible without the following:</p>
<ul>
<li><p><a href="https://walker-data.com/tidycensus/"><u>Tidycensus</u></a> by Kyle &gt; Walker is an incredibly elegant library that allows users to fetch &gt; a host of census data, only some of which I exposed in the &gt; front-end. It provides easy methods to retrieve data and provides &gt; advanced calculations for apportioning non-standard geometries to &gt; census geometries (said calculations are not currently used in &gt; this application).</p></li>
<li><p><a href="https://www.rplumber.io/"><u>Plumber</u></a> is responsible for the &gt; back-end API. The library made building an API quite fast.</p></li>
<li><p>The <a href="https://www.tidyverse.org/"><u>tidyverse</u></a> is a host of &gt; packages in R that is intended for working with data, whether that &gt; is data preparation or analysis. This was used to prepare data &gt; from Tidycensus before I sent it to the front-end.</p></li>
</ul>
</section>
<section id="postgres-database-with-postgis-enabled" class="level2">
<h2 class="anchored" data-anchor-id="postgres-database-with-postgis-enabled">POSTGRES DATABASE WITH POSTGIS ENABLED</h2>
<p>This is responsible for hosting all census variables and geometries. The database is populated by scripts in R so that the base deployment can be reproduced anywhere. PostGIS is only used to store the geometries which are then returned through the R package <a href="https://r-spatial.github.io/sf/"><u>sf</u></a>.</p>
</section>
</section>
<section id="conclusion" class="level1">
<h1>CONCLUSION</h1>
<p>There is plenty of room for growth in this application, but I believe I have a solid application to start with. I hope that I can find time in the future to further improve on this. My main goal, however, is to get this product out to some website where people can test it out.</p>
<p>Building this was a great learning experience. I have used React before, but I am always learning something new with the framework. Using R on the back-end was an actual delight, and I will be using it more down the road, outside of this context.</p>
<p>I hope others find use out of this application, and that maybe others will even contribute to it.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>